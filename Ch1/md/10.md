# veloportì™€ í•¨ê»˜í•˜ëŠ” ëª¨ë˜ ë¦¬ì•¡íŠ¸
## 1ì¥ - ë¦¬ì•¡íŠ¸ ì…ë¬¸
### useEffect - mount, unmount, ì—…ë°ì´íŠ¸ ì‹œ ì‘ì—… ì„¤ì •í•˜ê¸°
>  __mount, unmount__
- ë§ˆìš´íŠ¸(mount)ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œ `ìƒì„±`ë˜ì—ˆì„ë•Œ(êµ¬ë…(subscription)ì„ ì„¤ì •), ì–¸ë§ˆìš´íŠ¸(unmount)ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ `ì‚¬ë¼ì§ˆ ë•Œ`(êµ¬ë…(subscription)ì„ ì·¨ì†Œ)ë¥¼ ë§í•œë‹¤.
- ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²ƒì€ `ì»´í¬ë„ŒíŠ¸ì˜ props ê°’ì´ ì—…ë°ì´íŠ¸` ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ë§ˆìš´íŠ¸(mount)ì‹œ ì£¼ë¡œ í•˜ëŠ” ì‘ì—…
  - propsë¡œ ë°›ì€ ê°’ì„ ì»´í¬ë„ŒíŠ¸ì˜ stateë¡œ ì„¤ì •í•  ë•Œ
  - ì™¸ë¶€ API ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ
  - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ë•Œ(D3, Video.js, etc..)
  - setInterval, setTimeout ë“±ì„ ì‚¬ìš©í•  ë•Œ
- ì–¸ë§ˆìš´íŠ¸(unmount)ì‹œ ì£¼ë¡œ í•˜ëŠ” ì‘ì—…
  - clearInterval, clearTimeout
  - ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ ê°’ ì œê±°

> __useEffect__
- ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì´í›„ì˜ side effectë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” Hookì´ë‹¤.
```javascript
useEffect(() => {
    /* effect function */
    // ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ì‹œ ì§„í–‰ë  ì‘ì—…
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }
    // clean-upì´ í•„ìš”í•œ ì‘ì—…ì˜ ê²½ìš°ì—ëŠ” ì–¸ë§ˆìš´íŠ¸ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ ì¤€ë‹¤.
    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
    return () => {
      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
    };
},[/* dependencies array */]);
```
- useEffectì— ë„˜ê¸´ effect í•¨ìˆ˜ë¥¼ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ë¡œ ì¸í•œ DOM ì—…ë°ì´íŠ¸ ì´í›„ì— í˜¸ì¶œí•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ë‚´ë¶€ì— ì„¤ì •í•´ì„œ, ë³„ë„ì˜ API ì—†ì´ `ë‚´ë¶€ state ê°’ì— ì ‘ê·¼`í•  ìˆ˜ ìˆë‹¤.(JavaScript í´ë¡œì €)
- __useEffectëŠ” ì²« ë²ˆì§¸ ë Œë”ë§ ì´í›„ì˜ ëª¨ë“  ì—…ë°ì´íŠ¸ì—ì„œ ìˆ˜í–‰ëœë‹¤.__
- í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë³„ë„ì˜ ë©”ì†Œë“œë¡œ ë§ˆìš´íŠ¸, ì–¸ë§ˆìš´íŠ¸ ì‘ì—…ì„ ì‘ì„±í•˜ì§€ë§Œ ê·¸ ë‚´ìš©ì„ ê°™ê¸° ë•Œë¬¸ì— ì¤‘ë³µì´ ë°œìƒí•œë‹¤. ë°˜ë©´ì—, useEffectì—ì„œëŠ” __clean-upì´ í•„ìš”í•œ ì‘ì—…ì—ì„œë§Œ effect í•¨ìˆ˜ì˜ ë°˜í™˜ í•¨ìˆ˜ë¥¼ ì‘ì„±__ í•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ë‹¹ ì¤‘ë³µì„ ì—†ì•´ë‹¤.
```javascript
// í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸
class FriendStatus extends React.Component {
  constructor(props) {
    super(props);
    this.state = { isOnline: null };
    this.handleStatusChange = this.handleStatusChange.bind(this);
  }

  componentDidMount() {
    ChatAPI.subscribeToFriendStatus(
      this.props.friend.id,
      this.handleStatusChange
    );
  }
  componentWillUnmount() {
    ChatAPI.unsubscribeFromFriendStatus(
      this.props.friend.id,
      this.handleStatusChange
    );
  }
  handleStatusChange(status) {
    this.setState({
      isOnline: status.isOnline
    });
  }

  render() {
    if (this.state.isOnline === null) {
      return 'Loading...';
    }
    return this.state.isOnline ? 'Online' : 'Offline';
  }
}
```

```javascript
// Hookì„ ì´ìš©í•´ ì„ ì–¸í•œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸
import React, { useState, useEffect } from 'react';

function FriendStatus(props) {
  const [isOnline, setIsOnline] = useState(null);

  useEffect(() => {
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }
    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
    // effect ì´í›„ì— ì–´ë–»ê²Œ ì •ë¦¬(clean-up)í•  ê²ƒì¸ì§€ í‘œì‹œí•©ë‹ˆë‹¤.
    return function cleanup() {
      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
    };
  });

  if (isOnline === null) {
    return 'Loading...';
  }
  return isOnline ? 'Online' : 'Offline';
}
```
- `Dependency ë°°ì—´`ì„ í™œìš©í•˜ë©´, __í•´ë‹¹ stateê°’ì´ë‚˜ propsì´ ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²½ìš°ì— í•œí•´ì„œë§Œ effect í•¨ìˆ˜ë¥¼ í˜¸ì¶œ__ í•´ ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.
```javascript
useEffect(() => {
  document.title = `You clicked ${count} times`;
}, [count]); // countê°€ ë°”ë€” ë•Œë§Œ effectë¥¼ ì¬ì‹¤í–‰í•©ë‹ˆë‹¤.
``` 

## Reference
<https://ko.reactjs.org/docs/react-api.html>
<br>

[ğŸ‘ˆğŸ»PREV](https://github.com/ss-won/veloport-react/blob/master/Ch1/md/9.md) |
[NEXTğŸ‘‰ğŸ»](https://github.com/ss-won/veloport-react/blob/master/Ch1/md/11.md) <br>
[ëŒì•„ê°€ê¸°](https://github.com/ss-won/veloport-react)